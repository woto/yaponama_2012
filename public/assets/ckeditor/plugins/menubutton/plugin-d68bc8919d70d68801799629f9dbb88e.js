CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var t=function(t){var e=this._;if(e.state!==CKEDITOR.TRISTATE_DISABLED){e.previousState=e.state;var n=e.menu;n||(n=e.menu=new CKEDITOR.menu(t,{panel:{className:"cke_menu_panel",attributes:{"aria-label":t.lang.common.options}}}),n.onHide=CKEDITOR.tools.bind(function(){this.setState(this.modes&&this.modes[t.mode]?e.previousState:CKEDITOR.TRISTATE_DISABLED)},this),this.onMenu&&n.addListener(this.onMenu)),e.on?n.hide():(this.setState(CKEDITOR.TRISTATE_ON),setTimeout(function(){n.show(CKEDITOR.document.getById(e.id),4)},0))}};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(e){delete e.panel,this.base(e),this.hasArrow=!0,this.click=t},statics:{handler:{create:function(t){return new CKEDITOR.ui.menuButton(t)}}}})},beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton";