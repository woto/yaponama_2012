!function(){CKEDITOR.plugins.add("language",{requires:"menubutton",lang:"ca,cs,cy,el,en,en-gb,es,fi,hu,ja,km,nb,nl,no,pt,ru,sv,uk,zh,zh-cn",icons:"language",hidpi:!0,init:function(e){var n,a,t,l,r=e.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],g=this,u=e.lang.language,i={};for(e.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(e,n){var a=i["language_"+n];a&&e[a.style.checkActive(e.elementPath())?"removeStyle":"applyStyle"](a.style)},refresh:function(e){this.setState(g.getCurrentLangElement(e)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}}),l=0;l<r.length;l++)n=r[l].split(":"),a=n[0],t="language_"+a,i[t]={label:n[1],langId:a,group:"language",order:l,ltr:"rtl"!=(""+n[2]).toLowerCase(),onClick:function(){e.execCommand("language",this.langId)},role:"menuitemcheckbox"},i[t].style=new CKEDITOR.style({element:"span",attributes:{lang:a,dir:i[t].ltr?"ltr":"rtl"}});i.language_remove={label:u.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:i.length,onClick:function(){var n=g.getCurrentLangElement(e);n&&e.execCommand("language",n.getAttribute("lang"))}},e.addMenuGroup("language",1),e.addMenuGroup("language_remove"),e.addMenuItems(i),e.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:u.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var n,a={},t=g.getCurrentLangElement(e);for(n in i)a[n]=CKEDITOR.TRISTATE_OFF;return a.language_remove=t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t&&(a["language_"+t.getAttribute("lang")]=CKEDITOR.TRISTATE_ON),a}})},getCurrentLangElement:function(e){var n,a=e.elementPath(),e=a&&a.elements;if(a)for(var t=0;t<e.length;t++)a=e[t],!n&&"span"==a.getName()&&a.hasAttribute("dir")&&a.hasAttribute("lang")&&(n=a);return n}})}();