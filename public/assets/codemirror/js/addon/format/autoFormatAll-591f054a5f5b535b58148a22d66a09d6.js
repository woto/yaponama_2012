!function(){CodeMirror.defineExtension("autoFormatAll",function(e,n){function t(){s+="\n",d=!0,++c}for(var o=this,r=o.getMode(),i=o.getRange(e,n).split("\n"),a=CodeMirror.copyState(r,o.getTokenAt(e).state),l=o.getOption("tabSize"),s="",c=0,d=0==e.ch,f=0;f<i.length;++f){for(var g=new CodeMirror.StringStream(i[f],l);!g.eol();){var p=CodeMirror.innerMode(r,a),u=r.token(g,a),k=g.current();g.start=g.pos,(!d||/\S/.test(k))&&(s+=k,d=!1),!d&&p.mode.newlineAfterToken&&p.mode.newlineAfterToken(u,k,g.string.slice(g.pos)||i[f+1]||"",p.state)&&t()}!g.pos&&r.blankLine&&r.blankLine(a),!d&&f<i.length-1&&t()}o.operation(function(){o.replaceRange(s,e,n);for(var t=e.line+1,r=e.line+c;r>=t;++t)o.indentLine(t,"smart");o.setCursor({line:0,ch:0})})})}();