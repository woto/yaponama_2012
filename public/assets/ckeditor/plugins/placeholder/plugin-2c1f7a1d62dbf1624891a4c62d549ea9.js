!function(){var e=/\[\[[^\]]+\]\]/g;CKEDITOR.plugins.add("placeholder",{requires:"dialog",lang:"en,bg,cs,cy,da,de,el,eo,et,fa,fi,fr,he,hr,it,ku,nb,nl,no,pl,tr,ug,uk,vi,zh-cn",icons:"placeholder",hidpi:!0,onLoad:function(){CKEDITOR.addCss(".cke_placeholder{background-color: #ffff00;"+(CKEDITOR.env.gecko?"cursor: default;":"")+"}")},init:function(e){var l=e.lang.placeholder;e.addCommand("createplaceholder",new CKEDITOR.dialogCommand("createplaceholder")),e.addCommand("editplaceholder",new CKEDITOR.dialogCommand("editplaceholder")),e.ui.addButton&&e.ui.addButton("CreatePlaceholder",{label:l.toolbar,command:"createplaceholder",toolbar:"insert,5",icon:"placeholder"}),e.addMenuItems&&(e.addMenuGroup("placeholder",20),e.addMenuItems({editplaceholder:{label:l.edit,command:"editplaceholder",group:"placeholder",order:1,icon:"placeholder"}}),e.contextMenu&&e.contextMenu.addListener(function(e){return e&&e.data("cke-placeholder")?{editplaceholder:CKEDITOR.TRISTATE_OFF}:null})),e.on("doubleclick",function(l){CKEDITOR.plugins.placeholder.getSelectedPlaceHolder(e)&&(l.data.dialog="editplaceholder")}),e.on("contentDom",function(){e.editable().on("resizestart",function(l){e.getSelection().getSelectedElement().data("cke-placeholder")&&l.data.preventDefault()})}),CKEDITOR.dialog.add("createplaceholder",this.path+"dialogs/placeholder.js"),CKEDITOR.dialog.add("editplaceholder",this.path+"dialogs/placeholder.js")},afterInit:function(l){var t=l.dataProcessor,a=t&&t.dataFilter,t=t&&t.htmlFilter;a&&a.addRules({text:function(t){return t.replace(e,function(e){return CKEDITOR.plugins.placeholder.createPlaceholder(l,null,e,1)})}}),t&&t.addRules({elements:{span:function(e){e.attributes&&e.attributes["data-cke-placeholder"]&&delete e.name}}})}})}(),CKEDITOR.plugins.placeholder={createPlaceholder:function(e,l,t,a){var d=new CKEDITOR.dom.element("span",e.document);return d.setAttributes({contentEditable:"false","data-cke-placeholder":1,"class":"cke_placeholder"}),t&&d.setText(t),a?d.getOuterHtml():(l?CKEDITOR.env.ie?(d.insertAfter(l),setTimeout(function(){l.remove(),d.focus()},10)):d.replace(l):e.insertElement(d),null)},getSelectedPlaceHolder:function(e){for(e=e.getSelection().getRanges()[0],e.shrink(CKEDITOR.SHRINK_TEXT),e=e.startContainer;e&&(e.type!=CKEDITOR.NODE_ELEMENT||!e.data("cke-placeholder"));)e=e.getParent();return e}};