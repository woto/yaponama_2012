!function(){function e(e,i,r,o){if(this.atOccurrence=!1,this.doc=e,null==o&&"string"==typeof i&&(o=!1),r=r?e.clipPos(r):t(0,0),this.pos={from:r,to:r},"string"!=typeof i)i.global||(i=new RegExp(i.source,i.ignoreCase?"ig":"g")),this.matches=function(n,r){if(n){i.lastIndex=0;for(var o,l,s=e.getLine(r.line).slice(0,r.ch),h=0;;){i.lastIndex=h;var f=i.exec(s);if(!f)break;if(o=f,l=o.index,h=o.index+(o[0].length||1),h==s.length)break}var c=o&&o[0].length||0;c||(0==l&&0==s.length?o=void 0:l!=e.getLine(r.line).length&&c++)}else{i.lastIndex=r.ch;var s=e.getLine(r.line),o=i.exec(s),c=o&&o[0].length||0,l=o&&o.index;l+c==s.length||c||(c=1)}return o&&c?{from:t(r.line,l),to:t(r.line,l+c),match:o}:void 0};else{var l=i;o&&(i=i.toLowerCase());var s=o?function(e){return e.toLowerCase()}:function(e){return e},h=i.split("\n");if(1==h.length)this.matches=i.length?function(r,o){if(r){var h=e.getLine(o.line).slice(0,o.ch),f=s(h),c=f.lastIndexOf(i);if(c>-1)return c=n(h,f,c),{from:t(o.line,c),to:t(o.line,c+l.length)}}else{var h=e.getLine(o.line).slice(o.ch),f=s(h),c=f.indexOf(i);if(c>-1)return c=n(h,f,c)+o.ch,{from:t(o.line,c),to:t(o.line,c+l.length)}}}:function(){};else{var f=l.split("\n");this.matches=function(n,i){var r=h.length-1;if(n){if(i.line-(h.length-1)<e.firstLine())return;if(s(e.getLine(i.line).slice(0,f[r].length))!=h[h.length-1])return;for(var o=t(i.line,f[r].length),l=i.line-1,c=r-1;c>=1;--c,--l)if(h[c]!=s(e.getLine(l)))return;var g=e.getLine(l),u=g.length-f[0].length;if(s(g.slice(u))!=h[0])return;return{from:t(l,u),to:o}}if(!(i.line+(h.length-1)>e.lastLine())){var g=e.getLine(i.line),u=g.length-f[0].length;if(s(g.slice(u))==h[0]){for(var a=t(i.line,u),l=i.line+1,c=1;r>c;++c,++l)if(h[c]!=s(e.getLine(l)))return;if(e.getLine(l).slice(0,f[r].length)==h[r])return{from:a,to:t(l,f[r].length)}}}}}}}function n(e,n,t){if(e.length==n.length)return t;for(var i=Math.min(t,e.length);;){var r=e.slice(0,i).toLowerCase().length;if(t>r)++i;else{if(!(r>t))return i;--i}}}var t=CodeMirror.Pos;e.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function n(e){var n=t(e,0);return i.pos={from:n,to:n},i.atOccurrence=!1,!1}for(var i=this,r=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,r))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!r.line)return n(0);r=t(r.line-1,this.doc.getLine(r.line-1).length)}else{var o=this.doc.lineCount();if(r.line==o-1)return n(o);r=t(r.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(e){if(this.atOccurrence){var n=CodeMirror.splitLines(e);this.doc.replaceRange(n,this.pos.from,this.pos.to),this.pos.to=t(this.pos.from.line+n.length-1,n[n.length-1].length+(1==n.length?this.pos.from.ch:0))}}},CodeMirror.defineExtension("getSearchCursor",function(n,t,i){return new e(this.doc,n,t,i)}),CodeMirror.defineDocExtension("getSearchCursor",function(n,t,i){return new e(this,n,t,i)})}();