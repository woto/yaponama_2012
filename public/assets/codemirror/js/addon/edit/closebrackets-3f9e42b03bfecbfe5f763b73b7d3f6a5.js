!function(){function e(e,r){var o=e.getRange(CodeMirror.Pos(r.line,r.ch-1),CodeMirror.Pos(r.line,r.ch+1));return 2==o.length?o:null}function r(r){for(var o={name:"autoCloseBrackets",Backspace:function(o){if(o.somethingSelected()||o.getOption("disableInput"))return CodeMirror.Pass;var n=o.getCursor(),t=e(o,n);return t&&r.indexOf(t)%2==0?void o.replaceRange("",CodeMirror.Pos(n.line,n.ch-1),CodeMirror.Pos(n.line,n.ch+1)):CodeMirror.Pass}},n="",t=0;t<r.length;t+=2)(function(e,r){function t(o){var n=o.getSelection();o.replaceSelection(e+n+r)}function a(e){var o=e.getCursor(),n=e.getRange(o,CodeMirror.Pos(o.line,o.ch+1));return n!=r||e.somethingSelected()?CodeMirror.Pass:void e.execCommand("goCharRight")}e!=r&&(n+=r),o["'"+e+"'"]=function(o){if("'"==e&&"comment"==o.getTokenAt(o.getCursor()).type||o.getOption("disableInput"))return CodeMirror.Pass;if(o.somethingSelected())return t(o);if(e!=r||a(o)==CodeMirror.Pass){var c=o.getCursor(),s=CodeMirror.Pos(c.line,c.ch+1),d=o.getLine(c.line),l=d.charAt(c.ch),u=c.ch>0?d.charAt(c.ch-1):"";return e==r&&CodeMirror.isWordChar(u)?CodeMirror.Pass:d.length==c.ch||n.indexOf(l)>=0||i.test(l)?void o.replaceSelection(e+r,{head:s,anchor:s}):CodeMirror.Pass}},e!=r&&(o["'"+r+"'"]=a)})(r.charAt(t),r.charAt(t+1));return o}function o(r){return function(o){var n=o.getCursor(),t=e(o,n);return!t||r.indexOf(t)%2!=0||o.getOption("disableInput")?CodeMirror.Pass:void o.operation(function(){var e=CodeMirror.Pos(n.line+1,0);o.replaceSelection("\n\n",{anchor:e,head:e},"+input"),o.indentLine(n.line+1,null,!0),o.indentLine(n.line+2,null,!0)})}}var n="()[]{}''\"\"",t="[]{}",i=/\s/;CodeMirror.defineOption("autoCloseBrackets",!1,function(e,i,a){if(a!=CodeMirror.Init&&a&&e.removeKeyMap("autoCloseBrackets"),i){var c=n,s=t;"string"==typeof i?c=i:"object"==typeof i&&(null!=i.pairs&&(c=i.pairs),null!=i.explode&&(s=i.explode));var d=r(c);s&&(d.Enter=o(s)),e.addKeyMap(d)}})}();