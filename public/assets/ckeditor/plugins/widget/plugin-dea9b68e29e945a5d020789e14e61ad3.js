!function(){function e(e){this.editor=e,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],filters:{}},w(this),T(this),b(this),k(this),v(this),_(this)}function t(e,i,n,a,o){var r=e.editor;CKEDITOR.tools.extend(this,a,{editor:r,id:i,inline:"span"==n.getParent().getName(),element:n,data:CKEDITOR.tools.extend({},"function"==typeof a.defaults?a.defaults():a.defaults),dataReady:!1,inited:!1,ready:!1,edit:t.prototype.edit,focusedEditable:null,_:{downcastFn:a.downcast&&"string"==typeof a.downcast?a.downcasts[a.downcast]:a.downcast}},!0),e.fire("instanceCreated",this),L(this,a),this.init&&this.init(),this.inited=!0,(e=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(e)),o&&this.setData(o),this.dataReady=!0,x(this),this.fire("data",this.data),this.isInited()&&r.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function i(e,t,i){CKEDITOR.dom.element.call(this,t.$),this.editor=e,this.filter=i.filter}function n(e,t){e.addCommand(t.name,{exec:function(){function i(){var t=r.getFirst();t&&p(t)&&(e.insertElement(t),t=e.widgets.getByElement(t),t.ready=!0,t.fire("ready"),t.focus())}var n=e.widgets.focused;if(n&&n.name==t.name)n.edit();else if(t.insert)t.insert();else if(t.template){var a,n="function"==typeof t.defaults?t.defaults():t.defaults,n=CKEDITOR.dom.element.createFromHtml(t.template.output(n)),o=e.widgets.wrapElement(n,t.name),r=new CKEDITOR.dom.documentFragment(o.getDocument()),d=!0;r.append(o),(a=e.widgets.initOn(n,t))?(n=a.once("edit",function(t){d=!1,t.data.dialog?a.once("dialog",function(t){var n,o,t=t.data;n=t.once("ok",i,null,null,20),o=t.once("cancel",function(){e.widgets.destroy(a,!0)}),t.once("hide",function(){n.removeListener(),o.removeListener()})}):i()},null,null,999),a.edit(),n.removeListener(),d&&i()):i()}},refresh:function(e,t){this.setState(d(e.editable(),t.blockLimit)?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)},context:"div",allowedContent:t.allowedContent,requiredContent:t.requiredContent,contentForms:t.contentForms,contentTransformations:t.contentTransformations})}function a(e,t){e.focused=null,t.isInited()&&(e.fire("widgetBlurred",{widget:t}),t.setFocused(!1))}function o(e){var t=e.parent;t.type==CKEDITOR.NODE_ELEMENT&&t.attributes["data-cke-widget-wrapper"]&&t.replaceWith(e)}function r(e,t,i){if(!i.allowedContent)return null;var n=this._.filters[e];return n||(this._.filters[e]=n={}),(e=n[t])||(n[t]=e=new CKEDITOR.filter(i.allowedContent)),e}function d(e,t){return!t||t.equals(e)?null:t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("data-cke-widget-editable")?t:d(e,t.getParent())}function s(e){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off","class":"cke_widget_wrapper cke_widget_new cke_widget_"+(e?"inline":"block")}}function l(e,t,i){if(e.type==CKEDITOR.NODE_ELEMENT){var n=CKEDITOR.dtd[e.name];if(n&&!n[i.name]){var n=e.split(t),a=e.parent,t=n.getIndex();return e.children.length||(t-=1,e.remove()),n.children.length||n.remove(),l(a,t,i)}}e.add(i,t)}function c(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-widget"]}function u(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-widget")}function f(e,t){return"boolean"==typeof e.inline?e.inline:!!CKEDITOR.dtd.$inline[t]}function p(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-wrapper")}function g(e,t){var i=t.wrapper.getOuterHtml();t.wrapper.remove(),e.widgets.destroy(t,!0),e.fire("saveSnapshot"),e.fire("lockSnapshot"),e.execCommand("paste",i),e.fire("unlockSnapshot")}function h(e,t,i,n){e.editor.fire("lockSnapshot"),i?(n=i.data("cke-widget-editable"),n=t.editables[n],e.widgetHoldingFocusedEditable=t,t.focusedEditable=n,i.addClass("cke_widget_editable_focused"),n.filter&&e.editor.setActiveFilter(n.filter)):(n||t.focusedEditable.removeClass("cke_widget_editable_focused"),t.focusedEditable=null,e.widgetHoldingFocusedEditable=null,e.editor.setActiveFilter(null)),e.editor.fire("unlockSnapshot")}function m(e){e.contextMenu&&e.contextMenu.addListener(function(t){return(t=e.widgets.getByElement(t,!0))?t.fire("contextMenu",{}):void 0})}function w(e){var t=e.editor;C(e),E(e),t.on("contentDomUnload",function(){e.destroyAll(!0)}),t.on("paste",function(e){e.data.dataValue=e.data.dataValue.replace(/^(?:<div id="cke_copybin">)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/div>)?$/,"$1")})}function E(e){var t=e.editor,i={};t.on("toDataFormat",function(t){var n=CKEDITOR.tools.getNextNumber(),a=[];t.data.downcastingSessionId=n,i[n]=a,t.data.dataValue.forEach(function(t){var i,n=t.attributes;if("data-cke-widget-id"in n)(n=e.instances[n["data-cke-widget-id"]])&&(i=t.getFirst(c),a.push({wrapper:t,element:i,widget:n}),"1"!=i.attributes["data-cke-widget-keep-attr"]&&delete i.attributes["data-widget"]);else if("data-cke-widget-editable"in n)return delete n.contenteditable,t.setHtml(a[a.length-1].widget.editables[n["data-cke-widget-editable"]].getData()),!1},CKEDITOR.NODE_ELEMENT)},null,null,8),t.on("toDataFormat",function(e){if(e.data.downcastingSessionId)for(var t,n,a,e=i[e.data.downcastingSessionId];t=e.shift();)n=t.widget,a=t.element,(n=n._.downcastFn&&n._.downcastFn.call(n,a))||(n=a),t.wrapper.replaceWith(n)},null,null,13)}function _(e){var t=e.editor;t.on("contentDom",function(){var i=t.editable();i.attachListener(i,"drop",function(i){var n,a,o=i.data.$.dataTransfer.getData("text");if(o){try{n=JSON.parse(o)}catch(r){return}"cke-widget"==n.type&&(i.data.preventDefault(),n.editor==t.name&&(a=e.instances[n.id]))&&(t.fire("saveSnapshot"),n=i.data.$,o=t.createRange(),i.data.testRange?i.data.testRange.select():(document.caretRangeFromPoint?(i=t.document.$.caretRangeFromPoint(n.clientX,n.clientY),o.setStart(CKEDITOR.dom.node(i.startContainer),i.startOffset),o.collapse(!0)):n.rangeParent?(o.setStart(CKEDITOR.dom.node(n.rangeParent),n.rangeOffset),o.collapse(!0)):document.body.createTextRange&&(i=t.document.getBody().$.createTextRange(),i.moveToPoint(n.clientX,n.clientY),n="cke-temp-"+(new Date).getTime(),i.pasteHTML('<span id="'+n+'">​</span>'),i=t.document.getById(n),o.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i.remove()),o.select()),CKEDITOR.env.gecko?setTimeout(g,0,t,a):g(t,a))}})})}function k(e){var t=e.editor;t.on("contentDom",function(){var i,n,a=t.editable(),o=a.isInline()?a:t.document;a.attachListener(o,"mousedown",function(t){var a=t.data.getTarget();i=e.getByElement(a),n=0,a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-drag-handler")?n=1:i&&(d(i.wrapper,a)?i=null:(t.data.preventDefault(),CKEDITOR.env.ie||i.focus()))}),a.attachListener(o,"mouseup",function(){i&&n&&(n=0,i.focus())}),CKEDITOR.env.ie&&a.attachListener(o,"mouseup",function(){i&&setTimeout(function(){i.focus(),i=null})})}),t.on("doubleclick",function(t){var i=e.getByElement(t.data.element);return i&&!d(i.wrapper,t.data.element)?i.fire("doubleclick",{element:t.data.element}):void 0},null,null,1)}function v(e){e.editor.on("key",function(t){var i,n=e.focused,a=e.widgetHoldingFocusedEditable;return n?i=n.fire("key",{keyCode:t.data.keyCode}):a&&(n=t.data.keyCode,t=a.focusedEditable,n==CKEDITOR.CTRL+65?(n=t.getBogus(),a=a.editor.createRange(),a.selectNodeContents(t),n&&a.setEndAt(n,CKEDITOR.POSITION_BEFORE_START),a.select(),i=!1):8==n||46==n?(i=a.editor.getSelection().getRanges(),a=i[0],i=!(1==i.length&&a.collapsed&&a.checkBoundaryOfElement(t,CKEDITOR[8==n?"START":"END"]))):i=void 0),i},null,null,1)}function b(e){var t=e.editor;t.on("selectionCheck",function(){e.fire("checkSelection")}),e.on("checkSelection",e.checkSelection,e),t.on("selectionChange",function(i){var n=(i=d(t.editable(),i.data.selection.getStartElement()))&&e.getByElement(i),a=e.widgetHoldingFocusedEditable;a?a===n&&a.focusedEditable.equals(i)||(h(e,a,null),n&&i&&h(e,n,i)):n&&i&&h(e,n,i)}),t.on("dataReady",function(){O(e).commit()}),t.on("blur",function(){var t;(t=e.focused)&&a(e,t),(t=e.widgetHoldingFocusedEditable)&&h(e,t,null)})}function C(e){var t,i,n=e.editor,a=e._.upcasts;n.on("dataReady",function(){if(i)for(var t,a,o=n.editable().find(".cke_widget_wrapper"),r=0,d=o.count();d>r;++r)t=o.getItem(r),a=t.getFirst(u),a.type==CKEDITOR.NODE_ELEMENT&&a.data("widget")?(a.replace(t),e.wrapElement(a)):t.remove();i=0,e.destroyAll(!0),e.initOnAll()}),n.on("afterPaste",function(){n.fire("lockSnapshot");var i=e.initOnAll();t&&1==i.length&&i[0].focus(),n.fire("unlockSnapshot")}),n.on("loadSnapshot",function(t){/data-cke-widget/.test(t.data)&&(i=1),e.destroyAll(!0)},null,null,9),n.on("toHtml",function(i){var n,r=[];i.data.dataValue.forEach(function(e){if("data-cke-widget-wrapper"in e.attributes)return(e=e.getFirst(c))&&r.push([e]),!1;if("data-widget"in e.attributes)return r.push([e]),!1;if(a.length)for(var t,i,n,o=0,d=a.length;d>o;++o)if(t=a[o],n={},i=t[0](e,n))return i instanceof CKEDITOR.htmlParser.element&&(e=i),e.attributes["data-cke-widget-data"]=JSON.stringify(n),r.push([e,t[1]]),!1},CKEDITOR.NODE_ELEMENT);for(;n=r.pop();)o(n[0]),e.wrapElement(n[0],n[1]);t=1==i.data.dataValue.children.length&&i.data.dataValue.children[0].type==CKEDITOR.NODE_ELEMENT&&i.data.dataValue.children[0].attributes["data-cke-widget-wrapper"]},null,null,8)}function T(e){var t=e.editor,i=CKEDITOR.tools.eventsBuffer(e.MIN_WIDGETS_CHECK_INTERVAL,function(){e.fire("checkWidgets")}),n={16:1,17:1,18:1,37:1,38:1,39:1,40:1,225:1};t.on("contentDom",function(){var e=t.editable();e.attachListener(e.isInline()?e:t.document,"keyup",function(e){e.data.getKey()in n||i.input()},null,null,999)}),t.on("contentDomUnload",i.reset),e.on("checkWidgets",e.checkWidgets,e)}function O(e){var t=e.selected,i=[],n=t.slice(0),o=null;return{select:function(e){return 0>CKEDITOR.tools.indexOf(t,e)&&i.push(e),e=CKEDITOR.tools.indexOf(n,e),e>=0&&n.splice(e,1),this},focus:function(e){return o=e,this},commit:function(){var r,d=e.focused!==o;for(e.editor.fire("lockSnapshot"),d&&(r=e.focused)&&a(e,r);r=n.pop();)t.splice(CKEDITOR.tools.indexOf(t,r),1),r.isInited()&&r.setSelected(!1);for(d&&o&&(e.focused=o,e.fire("widgetFocused",{widget:o}),o.setFocused(!0));r=i.pop();)t.push(r),r.setSelected(!0);e.editor.fire("unlockSnapshot")}}}function D(e){e.cancel()}function y(e,t){var i=e.editor,n=new CKEDITOR.dom.element("div",i.document);n.setAttributes({id:"cke_copybin"}),n.setHtml('<span data-cke-copybin-start="1">​</span>'+e.wrapper.getOuterHtml()+'<span data-cke-copybin-end="1">​</span>'),i.fire("saveSnapshot"),i.fire("lockSnapshot"),i.editable().append(n);var a=i.on("selectionChange",D,null,null,0),o=e.repository.on("checkSelection",D,null,null,0),r=i.createRange();r.selectNodeContents(n),r.select(),setTimeout(function(){n.remove(),t||e.focus(),a.removeListener(),o.removeListener(),i.fire("unlockSnapshot"),t&&(e.repository.del(e),i.fire("saveSnapshot"))},0)}function I(){var e=CKEDITOR.document.getActive(),t=this.editor,i=t.editable();(i.isInline()?i:t.document.getWindow().getFrame()).equals(e)&&t.focusManager.focus(i)}function R(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function K(e){var t=e.editor,i=new CKEDITOR.dom.element("img",t.document),n=new CKEDITOR.dom.element("span",t.document);n.setAttributes({"class":"cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+t.plugins.widget.path+"images/handle.png)"}),i.setAttributes({draggable:"true","class":"cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:B,width:M,height:M}),i.on("dragstart",function(i){i.data.$.dataTransfer.setData("text",JSON.stringify({type:"cke-widget",editor:t.name,id:e.id}))}),n.append(i),e.wrapper.append(n),e.dragHandlerContainer=n}function A(e){var t,i,n=e.editables;if(e.editables={},e.editables)for(t in n)i=n[t],e.initEditable(t,"string"==typeof i?{selector:i}:i)}function S(e){if(e.mask){var t=new CKEDITOR.dom.element("img",e.editor.document);t.setAttributes({src:B,"class":"cke_widget_mask"}),e.wrapper.append(t),e.mask=t}}function N(e){if(e.parts){var t,i,n={};for(i in e.parts)t=e.wrapper.findOne(e.parts[i]),n[i]=t;e.parts=n}}function L(e,t){F(e),N(e),A(e),S(e),K(e),e.wrapper.removeClass("cke_widget_new"),e.element.addClass("cke_widget_element"),e.on("key",function(t){if(t=t.data.keyCode,13==t)e.edit();else{if(t==CKEDITOR.CTRL+67||t==CKEDITOR.CTRL+88)return void y(e,t==CKEDITOR.CTRL+88);if(t in H||CKEDITOR.CTRL&t)return}return!1},null,null,999),e.on("doubleclick",function(t){e.edit(),t.cancel()}),t.data&&e.on("data",t.data),t.edit&&e.on("edit",t.edit),e.on("data",function(){var t=e.dragHandlerContainer;t.setStyle("top",e.element.$.offsetTop-M+"px"),t.setStyle("left",e.element.$.offsetLeft+"px")},null,null,999)}function F(e){(e.wrapper=e.element.getParent()).setAttribute("data-cke-widget-id",e.id)}function x(e){e.element.data("cke-widget-data",JSON.stringify(e.data))}var M=14;CKEDITOR.plugins.add("widget",{onLoad:function(){CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid yellow;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid yellow}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #ace}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:"+M+"px;height:0;opacity:0.75;transition:height 0s 0.2s}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:"+M+"px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%}")},beforeInit:function(t){t.widgets=new e(t)},afterInit:function(e){var t,i,n,a=e.widgets.registered;for(i in a)t=a[i],(n=t.button)&&e.ui.addButton&&e.ui.addButton(CKEDITOR.tools.capitalize(t.name,!0),{label:n,command:t.name,toolbar:"insert,10"});m(e)}}),e.prototype={MIN_SELECTION_CHECK_INTERVAL:500,MIN_WIDGETS_CHECK_INTERVAL:1e3,add:function(e,t){t=CKEDITOR.tools.prototypedCopy(t),t.name=e,t.repository=this,t.definition=t,t._=t._||{},this.editor.fire("widgetDefinition",t),t.template&&(t.template=new CKEDITOR.template(t.template)),n(this.editor,t);var i=t,a=i.upcast;if(a)if("string"==typeof a)for(a=a.split(",");a.length;)this._.upcasts.push([i.upcasts[a.pop()],i.name]);else this._.upcasts.push([a,i.name]);return t.button||this.editor.addFeature(t),this.registered[e]=t},checkSelection:function(){var e,t=this.editor.getSelection(),i=t.getSelectedElement(),n=O(this);if(i&&(e=this.getByElement(i,!0)))return n.focus(e).select(e).commit();if(t=t.getRanges()[0],!t||t.collapsed)return n.commit();for(t=new CKEDITOR.dom.walker(t),t.evaluator=p;i=t.next();)n.select(this.getByElement(i));n.commit()},checkWidgets:function(){if("wysiwyg"==this.editor.mode){var e,t=this.editor.editable(),i=this.instances;if(t)for(e in i)t.contains(i[e].wrapper)||this.destroy(i[e],!0)}},del:function(e){if(this.focused===e){var t,i=e.editor,n=i.createRange();(t=n.moveToClosestEditablePosition(e.wrapper,!0))||(t=n.moveToClosestEditablePosition(e.wrapper,!1)),t&&i.getSelection().selectRanges([n])}e.wrapper.remove(),this.destroy(e,!0)},destroy:function(e,t){this.widgetHoldingFocusedEditable===e&&h(this,e,null,t),e.destroy(t),delete this.instances[e.id],this.fire("instanceDestroyed",e)},destroyAll:function(e){var t,i,n=this.instances;for(i in n)t=n[i],this.destroy(t,e)},getByElement:function(e,t){if(!e)return null;var i,n;for(n in this.instances)if(i=this.instances[n].wrapper,i.equals(e)||!t&&i.contains(e))return this.instances[n];return null},initOn:function(e,i,n){if(i?"string"==typeof i&&(i=this.registered[i]):i=this.registered[e.data("widget")],!i)return null;var a=this.wrapElement(e,i.name);return a?a.hasClass("cke_widget_new")?(e=new t(this,this._.nextId++,e,i,n),e.isInited()?this.instances[e.id]=e:null):this.getByElement(e):null},initOnAll:function(e){for(var t,e=(e||this.editor.editable()).find(".cke_widget_new"),i=[],n=e.count();n--;)(t=this.initOn(e.getItem(n).getFirst(u)))&&i.push(t);return i},wrapElement:function(e,t){var i,n=null;if(e instanceof CKEDITOR.dom.element){if(i=this.registered[t||e.data("widget")],!i)return null;if((n=e.getParent())&&n.type==CKEDITOR.NODE_ELEMENT&&n.data("cke-widget-wrapper"))return n;e.hasAttribute("data-cke-widget-keep-attr")||e.data("cke-widget-keep-attr",e.data("widget")?1:0),t&&e.data("widget",t),i=f(i,e.getName()),n=new CKEDITOR.dom.element(i?"span":"div"),n.setAttributes(s(i)),e.getParent(!0)&&n.replace(e),e.appendTo(n)}else if(e instanceof CKEDITOR.htmlParser.element){if(i=this.registered[t||e.attributes["data-widget"]],!i)return null;if((n=e.parent)&&n.type==CKEDITOR.NODE_ELEMENT&&n.attributes["data-cke-widget-wrapper"])return n;"data-cke-widget-keep-attr"in e.attributes||(e.attributes["data-cke-widget-keep-attr"]=e.attributes["data-widget"]?1:0),t&&(e.attributes["data-widget"]=t),i=f(i,e.name),n=new CKEDITOR.htmlParser.element(i?"span":"div",s(i)),i=e.parent;var a;i&&(a=e.getIndex(),e.remove()),n.add(e),i&&l(i,a,n)}return n},_tests_getNestedEditable:d,_tests_createEditableFilter:r},CKEDITOR.event.implementOn(e.prototype),t.prototype={destroy:function(e){if(this.fire("destroy"),this.editables)for(var t in this.editables)this.destroyEditable(t,e);e||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(e,t){var i=this.editables[e];i.removeListener("focus",R),i.removeListener("blur",I),this.editor.focusManager.remove(i),t||(i.removeClass("cke_widget_editable"),i.removeClass("cke_widget_editable_focused"),i.removeAttributes(["contenteditable","data-cke-widget-editable"])),delete this.editables[e]},edit:function(){var e={dialog:this.dialog},t=this;this.fire("edit",e)&&e.dialog&&this.editor.openDialog(e.dialog,function(e){var i,n;t.fire("dialog",e)&&(e._.widget=t,i=e.on("show",function(){e.setupContent(t)}),n=e.on("ok",function(){var i,n=t.on("data",function(e){i=1,e.cancel()},null,null,0);t.editor.fire("saveSnapshot"),e.commitContent(t),n.removeListener(),i&&(t.fire("data",t.data),t.editor.fire("saveSnapshot"))}),e.once("hide",function(){i.removeListener(),n.removeListener()}))})},initEditable:function(e,t){var n=this.wrapper.findOne(t.selector);return n&&n.is(CKEDITOR.dtd.$editable)?(n=new i(this.editor,n,{filter:r.call(this.repository,this.name,e,t)}),this.editables[e]=n,n.setAttributes({contenteditable:"true","data-cke-widget-editable":e}),n.addClass("cke_widget_editable"),n.removeClass("cke_widget_editable_focused"),this.editor.focusManager.add(n),n.on("focus",R,this),CKEDITOR.env.ie&&n.on("blur",I,this),n.setData(n.getHtml()),!0):!1},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var e=this.editor.getSelection();e&&e.fake(this.wrapper),this.editor.focus()},setData:function(e,t){var i=this.data,n=0;if("string"==typeof e)i[e]!==t&&(i[e]=t,n=1);else{var a=e;for(e in a)i[e]!==a[e]&&(n=1,i[e]=a[e])}return n&&this.dataReady&&(x(this),this.fire("data",i)),this},setFocused:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_focused"),this.fire(e?"focus":"blur"),this},setSelected:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_selected"),this.fire(e?"select":"deselect"),this}},CKEDITOR.event.implementOn(t.prototype),i.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(e){e=this.editor.dataProcessor.toHtml(e,{context:this.getName(),filter:this.filter,enterMode:this.filter?this.filter.getAllowedEnterMode():this.editor.enterMode}),this.setHtml(e)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.filter?this.filter.getAllowedEnterMode():this.editor.enterMode})}});var B="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",H={37:1,38:1,39:1,40:1,8:1,46:1};CKEDITOR.plugins.widget=t,t.repository=e,t.nestedEditable=i}();