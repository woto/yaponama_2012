!function(){"use strict";function e(e,n){return e.line-n.line||e.ch-n.ch}function n(e,n,r,t){this.line=n,this.ch=r,this.cm=e,this.text=e.getLine(n),this.min=t?t.from:e.firstLine(),this.max=t?t.to-1:e.lastLine()}function r(e,n){var r=e.cm.getTokenTypeAt(s(e.line,n));return r&&/\btag\b/.test(r)}function t(e){return e.line>=e.max?void 0:(e.ch=0,e.text=e.cm.getLine(++e.line),!0)}function i(e){return e.line<=e.min?void 0:(e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0)}function f(e){for(;;){var n=e.text.indexOf(">",e.ch);if(-1==n){if(t(e))continue;return}{if(r(e,n+1)){var i=e.text.lastIndexOf("/",n),f=i>-1&&!/\S/.test(e.text.slice(i+1,n));return e.ch=n+1,f?"selfClose":"regular"}e.ch=n+1}}}function o(e){for(;;){var n=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==n){if(i(e))continue;return}if(r(e,n+1)){g.lastIndex=n,e.ch=n;var t=g.exec(e.text);if(t&&t.index==n)return t}else e.ch=n}}function u(e){for(;;){g.lastIndex=e.ch;var n=g.exec(e.text);if(!n){if(t(e))continue;return}{if(r(e,n.index+1))return e.ch=n.index+n[0].length,n;e.ch=n.index+1}}}function l(e){for(;;){var n=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==n){if(i(e))continue;return}{if(r(e,n+1)){var t=e.text.lastIndexOf("/",n),f=t>-1&&!/\S/.test(e.text.slice(t+1,n));return e.ch=n+1,f?"selfClose":"regular"}e.ch=n}}}function c(e,n){for(var r=[];;){var t,i=u(e),o=e.line,l=e.ch-(i?i[0].length:0);if(!i||!(t=f(e)))return;if("selfClose"!=t)if(i[1]){for(var c=r.length-1;c>=0;--c)if(r[c]==i[2]){r.length=c;break}if(0>c&&(!n||n==i[2]))return{tag:i[2],from:s(o,l),to:s(e.line,e.ch)}}else r.push(i[2])}}function a(e,n){for(var r=[];;){var t=l(e);if(!t)return;if("selfClose"!=t){var i=e.line,f=e.ch,u=o(e);if(!u)return;if(u[1])r.push(u[2]);else{for(var c=r.length-1;c>=0;--c)if(r[c]==u[2]){r.length=c;break}if(0>c&&(!n||n==u[2]))return{tag:u[2],from:s(e.line,e.ch),to:s(i,f)}}}else o(e)}}var s=CodeMirror.Pos,h="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",x=h+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",g=new RegExp("<(/?)(["+h+"]["+x+"]*)","g");CodeMirror.registerHelper("fold","xml",function(e,r){for(var t=new n(e,r.line,0);;){var i,o=u(t);if(!o||t.line!=r.line||!(i=f(t)))return;if(!o[1]&&"selfClose"!=i){var r=s(t.line,t.ch),l=c(t,o[2]);return l&&{from:r,to:l.from}}}}),CodeMirror.tagRangeFinder=CodeMirror.fold.xml,CodeMirror.findMatchingTag=function(r,t,i){var u=new n(r,t.line,t.ch,i);if(-1!=u.text.indexOf(">")||-1!=u.text.indexOf("<")){var l=f(u),h=l&&s(u.line,u.ch),x=l&&o(u);if(l&&"selfClose"!=l&&x&&!(e(u,t)>0)){var g={from:s(u.line,u.ch),to:h,tag:x[2]};return x[1]?{open:a(u,x[2]),close:g,at:"close"}:(u=new n(r,h.line,h.ch,i),{open:g,close:c(u,x[2]),at:"open"})}}},CodeMirror.findEnclosingTag=function(e,r,t){for(var i=new n(e,r.line,r.ch,t);;){var f=a(i);if(!f)break;var o=new n(e,r.line,r.ch,t),u=c(o,f.tag);if(u)return{open:f,close:u}}},CodeMirror.scanForClosingTag=function(e,r,t,i){var f=new n(e,r.line,r.ch,i?{from:0,to:i}:null);return!!c(f,t)}}();