!function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en,en-au,en-ca,en-gb,eo,es,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,ug,uk,vi,zh,zh-cn",init:function(e){var t=e.config,n=e.lang.stylescombo,i={},l=[],s=[];e.on("stylesSet",function(n){if(n=n.data.styles){for(var a,o,r=0,h=n.length;h>r;r++)a=n[r],e.blockless&&a.element in CKEDITOR.dtd.$block||(o=a.name,a=new CKEDITOR.style(a),e.filter.customConfig&&!e.filter.check(a))||(a._name=o,a._.enterMode=t.enterMode,a._.weight=r+1e3*(a.type==CKEDITOR.STYLE_OBJECT?1:a.type==CKEDITOR.STYLE_BLOCK?2:3),i[o]=a,l.push(a),s.push(a));l.sort(function(e,t){return e._.weight-t._.weight})}}),e.ui.addRichCombo("Styles",{label:n.label,title:n.panelTitle,toolbar:"styles,10",allowedContent:s,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!0,attributes:{"aria-label":n.panelTitle}},init:function(){var e,t,i,s,a,o;for(a=0,o=l.length;o>a;a++)e=l[a],t=e._name,s=e.type,s!=i&&(this.startGroup(n["panelTitle"+s]),i=s),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(t){e.focus(),e.fire("saveSnapshot");var t=i[t],n=e.elementPath();e[t.checkActive(n)?"removeStyle":"applyStyle"](t),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",function(e){for(var t,n=this.getValue(),e=e.data.path.elements,l=0,s=e.length;s>l;l++){t=e[l];for(var a in i)if(i[a].checkElementRemovable(t,!0))return void(a!=n&&this.setValue(a))}this.setValue("")},this)},onOpen:function(){var t=e.getSelection().getSelectedElement(),t=e.elementPath(t),l=[0,0,0,0];this.showAll(),this.unmarkAll();for(var s in i){var a=i[s],o=a.type;o!=CKEDITOR.STYLE_BLOCK||t.isContextFor(a.element)?(a.checkActive(t)?this.mark(s):o==CKEDITOR.STYLE_OBJECT&&!a.checkApplicable(t)&&(this.hideItem(s),l[o]--),l[o]++):this.hideItem(s)}l[CKEDITOR.STYLE_BLOCK]||this.hideGroup(n["panelTitle"+CKEDITOR.STYLE_BLOCK]),l[CKEDITOR.STYLE_INLINE]||this.hideGroup(n["panelTitle"+CKEDITOR.STYLE_INLINE]),l[CKEDITOR.STYLE_OBJECT]||this.hideGroup(n["panelTitle"+CKEDITOR.STYLE_OBJECT])},reset:function(){i={},l=[]}})}})}();