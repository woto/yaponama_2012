CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en,en-au,en-ca,en-gb,eo,es,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,ug,uk,vi,zh,zh-cn",icons:"pagebreak,pagebreak-rtl",hidpi:!0,onLoad:function(){var e=["{","background: url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;","clear: both;width:100%; _width:99.9%;border-top: #999999 1px dotted;border-bottom: #999999 1px dotted;padding:0;height: 5px;cursor: default;}"].join("").replace(/;/g," !important;");CKEDITOR.addCss("div.cke_pagebreak"+e)},init:function(e){e.blockless||(e.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),e.ui.addButton&&e.ui.addButton("PageBreak",{label:e.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.opera&&e.on("contentDom",function(){e.document.on("click",function(a){a=a.data.getTarget(),a.is("div")&&a.hasClass("cke_pagebreak")&&e.getSelection().selectElement(a)})}))},afterInit:function(e){var a=e.lang.pagebreak.alt,t=e.dataProcessor,e=t&&t.dataFilter;(t=t&&t.htmlFilter)&&t.addRules({attributes:{"class":function(e,a){var t=e.replace("cke_pagebreak","");if(t!=e){var n=CKEDITOR.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>').children[0];a.children.length=0,a.add(n),n=a.attributes,delete n["aria-label"],delete n.contenteditable,delete n.title}return t}}},5),e&&e.addRules({elements:{div:function(e){var t=e.attributes,n=t&&t.style,r=n&&1==e.children.length&&e.children[0];(r=r&&"span"==r.name&&r.attributes.style)&&/page-break-after\s*:\s*always/i.test(n)&&/display\s*:\s*none/i.test(r)&&(t.contenteditable="false",t["class"]="cke_pagebreak",t["data-cke-display-name"]="pagebreak",t["aria-label"]=a,t.title=a,e.children.length=0)}}})}}),CKEDITOR.plugins.pagebreakCmd={exec:function(e){var a=e.lang.pagebreak.alt,a=CKEDITOR.dom.element.createFromHtml('<div style="page-break-after: always;"contenteditable="false" title="'+a+'" aria-label="'+a+'" data-cke-display-name="pagebreak" class="cke_pagebreak"></div>',e.document);e.insertElement(a)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(e){return(e=e.parent)&&"div"==e.name&&e.styles["page-break-after"]},styles:"display"}},requiredContent:"div{page-break-after}"};