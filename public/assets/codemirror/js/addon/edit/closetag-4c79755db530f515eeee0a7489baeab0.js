!function(){function e(e){var t=e.getCursor(),i=e.getTokenAt(t),a=CodeMirror.innerMode(e.getMode(),i.state),s=a.state;if("xml"!=a.mode.name||!s.tagName||e.getOption("disableInput"))return CodeMirror.Pass;var l=e.getOption("autoCloseTags"),d="html"==a.mode.configuration,g="object"==typeof l&&l.dontCloseTags||d&&r,c="object"==typeof l&&l.indentTags||d&&o,u=s.tagName;i.end>t.ch&&(u=u.slice(0,u.length-i.end+t.ch));var f=u.toLowerCase();if(!u||"string"==i.type&&(i.end!=t.ch||!/[\"\']/.test(i.string.charAt(i.string.length-1))||1==i.string.length)||"tag"==i.type&&"closeTag"==s.type||i.string.indexOf("/")==i.string.length-1||g&&n(g,f)>-1||CodeMirror.scanForClosingTag&&CodeMirror.scanForClosingTag(e,t,u,Math.min(e.lastLine()+1,t.line+50)))return CodeMirror.Pass;var h=c&&n(c,f)>-1,m=h?CodeMirror.Pos(t.line+1,0):CodeMirror.Pos(t.line,t.ch+1);e.replaceSelection(">"+(h?"\n\n":"")+"</"+u+">",{head:m,anchor:m}),h&&(e.indentLine(t.line+1,null,!0),e.indentLine(t.line+2,null))}function t(e){var t=e.getCursor(),n=e.getTokenAt(t),r=CodeMirror.innerMode(e.getMode(),n.state),o=r.state;if("string"==n.type||"<"!=n.string.charAt(0)||n.start!=t.ch-1||"xml"!=r.mode.name||e.getOption("disableInput"))return CodeMirror.Pass;var i=o.context&&o.context.tagName;i&&e.replaceSelection("/"+i+">","end")}function n(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;r>n;++n)if(e[n]==t)return n;return-1}CodeMirror.defineOption("autoCloseTags",!1,function(n,r,o){if(o!=CodeMirror.Init&&o&&n.removeKeyMap("autoCloseTags"),r){var i={name:"autoCloseTags"};("object"!=typeof r||r.whenClosing)&&(i["'/'"]=function(e){return t(e)}),("object"!=typeof r||r.whenOpening)&&(i["'>'"]=function(t){return e(t)}),n.addKeyMap(i)}});var r=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],o=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"]}();