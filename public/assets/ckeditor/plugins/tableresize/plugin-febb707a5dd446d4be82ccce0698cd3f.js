!function(){function e(e){return CKEDITOR.env.ie?e.$.clientWidth:parseInt(e.getComputedStyle("width"),10)}function t(e,t){var o=e.getComputedStyle("border-"+t+"-width"),n={thin:"0px",medium:"1px",thick:"2px"};return 0>o.indexOf("px")&&(o=o in n&&"none"!=e.getComputedStyle("border-style")?n[o]:0),parseInt(o,10)}function o(e){var o,n=[],a=-1,i="rtl"==e.getComputedStyle("direction");o=e.$.rows;for(var r,l,s,u=0,d=0,m=o.length;m>d;d++)s=o[d],r=s.cells.length,r>u&&(u=r,l=s);for(o=l,u=new CKEDITOR.dom.element(e.$.tBodies[0]),r=u.getDocumentPosition(),l=0,s=o.cells.length;s>l;l++){var c,f,d=new CKEDITOR.dom.element(o.cells[l]),m=o.cells[l+1]&&new CKEDITOR.dom.element(o.cells[l+1]),a=a+(d.$.colSpan||1),h=d.getDocumentPosition().x;i?f=h+t(d,"left"):c=h+d.$.offsetWidth-t(d,"right"),m?(h=m.getDocumentPosition().x,i?c=h+m.$.offsetWidth-t(m,"right"):f=h+t(m,"left")):(h=e.getDocumentPosition().x,i?c=h:f=h+e.$.offsetWidth),d=Math.max(f-c,3),n.push({table:e,index:a,x:c,y:r.y,width:d,height:u.$.offsetHeight,rtl:i})}return n}function n(e){(e.data||e).preventDefault()}function a(o){function a(){h=0,f.setOpacity(0),v&&i();var e=m.table;setTimeout(function(){e.removeCustomData("_cke_table_pillars")},0),c.removeListener("dragstart",n)}function i(){for(var o=m.rtl,n=o?y.length:p.length,a=0;n>a;a++){var i=p[a],l=y[a],s=m.table;CKEDITOR.tools.setTimeout(function(e,t,n,a,i,l){e&&e.setStyle("width",r(Math.max(t+l,0))),n&&n.setStyle("width",r(Math.max(a-l,0))),i&&s.setStyle("width",r(i+l*(o?-1:1)))},0,this,[i,i&&e(i),l,l&&e(l),(!i||!l)&&e(s)+t(s,"left")+t(s,"right"),v])}}function s(t){n(t);for(var t=m.index,o=CKEDITOR.tools.buildTableMap(m.table),a=[],i=[],r=Number.MAX_VALUE,l=r,s=m.rtl,D=0,C=o.length;C>D;D++){var T=o[D],w=T[t+(s?1:0)],T=T[t+(s?0:1)],w=w&&new CKEDITOR.dom.element(w),T=T&&new CKEDITOR.dom.element(T);w&&T&&w.equals(T)||(w&&(r=Math.min(r,e(w))),T&&(l=Math.min(l,e(T))),a.push(w),i.push(T))}p=a,y=i,b=m.x-r,x=m.x+l,f.setOpacity(.5),g=parseInt(f.getStyle("left"),10),v=0,h=1,f.on("mousemove",d),c.on("dragstart",n),c.on("mouseup",u,this)}function u(e){e.removeListener(),a()}function d(e){D(e.data.getPageOffset().x)}var m,c,f,h,g,v,p,y,b,x;c=o.document,f=CKEDITOR.dom.element.createFromHtml('<div data-cke-temp=1 contenteditable=false unselectable=on style="position:absolute;cursor:col-resize;filter:alpha(opacity=0);opacity:0;padding:0;background-color:#004;background-image:none;border:0px none;z-index:10"></div>',c),o.on("destroy",function(){f.remove()}),l||c.getDocumentElement().append(f),this.attachTo=function(e){h||(l&&(c.getBody().append(f),v=0),m=e,f.setStyles({width:r(e.width),height:r(e.height),left:r(e.x),top:r(e.y)}),l&&f.setOpacity(.25),f.on("mousedown",s,this),c.getBody().setStyle("cursor","col-resize"),f.show())};var D=this.move=function(e){if(!m)return 0;if(!h&&(e<m.x||e>m.x+m.width))return m=null,h=v=0,c.removeListener("mouseup",u),f.removeListener("mousedown",s),f.removeListener("mousemove",d),c.getBody().setStyle("cursor","auto"),l?f.remove():f.hide(),0;if(e-=Math.round(f.$.offsetWidth/2),h){if(e==b||e==x)return 1;e=Math.max(e,b),e=Math.min(e,x),v=e-g}return f.setStyle("left",r(e)),1}}function i(e){var t=e.data.getTarget();if("mouseout"==e.name){if(!t.is("table"))return;for(var o=new CKEDITOR.dom.element(e.data.$.relatedTarget||e.data.$.toElement);o&&o.$&&!o.equals(t)&&!o.is("body");)o=o.getParent();if(!o||o.equals(t))return}t.getAscendant("table",1).removeCustomData("_cke_table_pillars"),e.removeListener()}var r=CKEDITOR.tools.cssLength,l=CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks);CKEDITOR.plugins.add("tableresize",{requires:"tabletools",init:function(e){e.on("contentDom",function(){var t;e.document.getBody().on("mousemove",function(r){var r=r.data,l=r.getPageOffset().x;if(t&&t.move(l))n(r);else{var s,r=r.getTarget();if(r.is("table")||r.getAscendant("tbody",1)){s=r.getAscendant("table",1),(r=s.getCustomData("_cke_table_pillars"))||(s.setCustomData("_cke_table_pillars",r=o(s)),s.on("mouseout",i),s.on("mousedown",i));e:{s=0;for(var u=r.length;u>s;s++){var d=r[s];if(l>=d.x&&l<=d.x+d.width){l=d;break e}}l=null}l&&(!t&&(t=new a(e)),t.attachTo(l))}}})})}})}();