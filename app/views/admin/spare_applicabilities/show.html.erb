<% @meta_title = @resource.to_label %>

<%= page do |p| %>

  <%= p.breadcrumb do |b| %>
    <%= b.item 'Главная', [:root] %>
    <%= b.item 'Администрирование', [:admin, :root] %>
    <%= b.item 'Замены', [:admin, @resource_class] %>
    <%= b.item @meta_title %>
  <% end %>

  <%= p.title do %>
    <%= page_header %>
  <% end %>

  <%= p.content do %>
    <%= link_to url_for(action: :new, spare_applicability: {spare_info_attributes: {name: @resource.spare_info.to_label}}, return_path: request.fullpath), class: "btn btn-primary" do %>
      <%= icon 'plus' %>
      Добавить применимость для этой же запчасти
    <% end %>

    <br />
    <br />

    <%= link_to url_for(action: :new, spare_applicability: {spare_info_attributes: {name: @resource.spare_info.to_label}, brand_attributes: {name: @resource.brand.to_label}}, return_path: request.fullpath), class: "btn btn-primary" do %>
      <%= icon 'plus' %>
      Добавить применимость для этого же бренда
    <% end %>

    <br />
    <br />

    <%= link_to url_for(action: :new, spare_applicability: {spare_info_attributes: {name: @resource.spare_info.to_label}, brand_attributes: {name: @resource.brand.to_label}, model_attributes: {name: @resource.model.to_label}}, return_path: request.fullpath), class: "btn btn-primary" do %>
      <%= icon 'plus' %>
      Добавить применимость для этой же модели
    <% end %>

    <br />
    <br />

    <% if false %>
    <%# TODO это почему-то не работает. Забыл почему %>
    <%= link_to url_for(action: :new, spare_applicability: {spare_info_attributes: {name: @resource.spare_info.to_label}, brand_attributes: {name: @resource.brand.to_label}, model_attributes: {name: @resource.model.to_label}, generation_attributes: {name: @resource.generation.to_label}}, return_path: request.fullpath), class: "btn btn-primary" do %>
      <%= icon 'plus' %>
      Добавить применимость для этого же поколения
    <% end %>

    <br />
    <br />
    <% end %>

    <%= render 'smart_show' %>
  <% end %>
<% end %>
