<%= row do %>
  <div class="col-lg-12">
    <div class="well">
      <div class="clearfix">
        <%= render 'common_search_form' %>
      </div>
    </div>
  </div>
<% end %>

<%= panel 'primary' do |p| %>
  <%= p.heading do %>
    <%= p.title { 'Товар' } %>
  <% end %>
  <%= p.body do %>
    <%= twbs_form_for @resource, url: polymorphic_path([(admin_zone? ? :admin : :user), (admin_zone? ? @somebody : nil), @resource], :return_path => params[:return_path]), class: 'product' do |f| %>
      <%= f.twbs_hidden_field :product_id %>

      <% if f.object.product_id.present? %>
        <%= alert 'info' do %>
          Позиция будет отражена как перезаказанная с <%= f.object.product.to_label %>
        <% end %>
      <% end %>

      <%= f.twbs_text_field :catalog_number, asterisk: true, hint: "Например: #{TemplateData::CATALOG_NUMBERS.sample}" %>
      <%= f.twbs_check_box :hide_catalog_number %>

      <%= f.fields_for :brand, f.object.brand || f.object.build_brand do |b| %>
        <%= f.form_group :brand do %>
          <%= b.twbs_select2 :name, rel: 'select2-brand', data: {"true-id" => f.object.brand_id}, asterisk: true, hint: "Например: #{TemplateData::MANUFACTURERS.sample}" %>
          <%= f.error(:brand) %>
        <% end %>
      <% end %>

      <%= f.twbs_text_field :short_name %>
      <%= f.twbs_text_field :quantity_ordered, asterisk: true %>
      <%= f.twbs_text_field :buy_cost, asterisk: true %>
      <%= f.twbs_text_field :sell_cost, asterisk: true %>
      <%= f.twbs_text_area :long_name, rows: 4 %>
      <%= f.twbs_text_field :quantity_available %>
      <%= f.twbs_text_field :probability %>
      <%= f.twbs_text_field :min_days %>
      <%= f.twbs_text_field :max_days %>

      <%= render :partial => 'profileables/forms/shared/notes', :locals => {:f => f} %>

      <%= f.twbs_submit %>

    <% end %>
  <% end %>
<% end %>
