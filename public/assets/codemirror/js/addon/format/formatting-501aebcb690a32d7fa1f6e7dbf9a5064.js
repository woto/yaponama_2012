!function(){function e(e){for(var t=[/for\s*?\((.*?)\)/g,/&#?[a-z0-9]+;[\s\S]/g,/\"(.*?)((\")|$)/g,/\/\*(.*?)(\*\/|$)/g,/^\/\/.*/g],n=[],r=0;r<t.length;r++)for(var i=0;i<e.length;){var o=e.substr(i).match(t[r]);if(null==o)break;n.push({start:i+o.index,end:i+o.index+o[0].length}),i+=o.index+Math.max(1,o[0].length)}return n.sort(function(e,t){return e.start-t.start}),n}CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t){return/^[;{}]$/.test(t)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(t){var n=0,r=this.jsonMode?function(e){return e.replace(/([,{])/g,"$1\n").replace(/}/g,"\n}")}:function(e){return e.replace(/(;|\{|\})([^\r\n;])/g,"$1\n$2")},i=e(t),o="";if(null!=i){for(var a=0;a<i.length;a++)i[a].start>n&&(o+=r(t.substring(n,i[a].start)),n=i[a].start),i[a].start<=n&&i[a].end>=n&&(o+=t.substring(n,i[a].end),n=i[a].end);n<t.length&&(o+=r(t.substr(n)))}else o=r(t);return o.replace(/^\n*|\n*$/,"")}});CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",noBreak:!1,noBreakEmpty:null,tagType:"",tagName:"",isXML:!1,newlineAfterToken:function(e,t,n){var r="label|li|option|textarea|title",i="a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u",o=r+"|"+i,a=!1,s=null,l="";if(this.isXML="xml"==this.configuration?!0:!1,"comment"==e||/<!--/.test(n))return!1;if("tag"==e){if(0==t.indexOf("<")&&0==!t.indexOf("</")){this.tagType="open",s=t.match(/^<\s*?([\w]+?)$/i),this.tagName=null!=s?s[1]:"";var l=this.tagName.toLowerCase();-1!=("|"+o+"|").indexOf("|"+l+"|")&&(this.noBreak=!0)}if(0==t.indexOf(">")&&"open"==this.tagType){this.tagType="";var g=this.isXML?"[^<]*?":"";return RegExp("^"+g+"</s*?"+this.tagName+"s*?>","i").test(n)?(this.noBreak=!1,this.isXML||(this.tagName=""),!1):(a=this.noBreak,this.noBreak=!1,a?!1:!0)}if(0==t.indexOf("</")&&(this.tagType="close",s=t.match(/^<\/\s*?([\w]+?)$/i),null!=s&&(l=s[1].toLowerCase()),-1!=("|"+i+"|").indexOf("|"+l+"|")&&(this.noBreak=!0)),0==t.indexOf(">")&&"close"==this.tagType)return this.tagType="",0==n.indexOf("<")&&(s=n.match(/^<\/?\s*?([\w]+?)(\s|>)/i),l=null!=s?s[1].toLowerCase():"",-1==("|"+o+"|").indexOf("|"+l+"|"))?(this.noBreak=!1,!0):(a=this.noBreak,this.noBreak=!1,a?!1:!0)}return 0==n.indexOf("<")?(this.noBreak=!1,this.isXML&&""!=this.tagName?(this.tagName="",!1):(s=n.match(/^<\/?\s*?([\w]+?)(\s|>)/i),l=null!=s?s[1].toLowerCase():"",-1!=("|"+o+"|").indexOf("|"+l+"|")?!1:!0)):!1}}),CodeMirror.defineExtension("commentRange",function(e,t,n){var r=this,i=CodeMirror.innerMode(r.getMode(),r.getTokenAt(t).state).mode;r.operation(function(){if(e)r.replaceRange(i.commentEnd,n),r.replaceRange(i.commentStart,t),t.line==n.line&&t.ch==n.ch&&r.setCursor(t.line,t.ch+i.commentStart.length);else{var o=r.getRange(t,n),a=o.indexOf(i.commentStart),s=o.lastIndexOf(i.commentEnd);a>-1&&s>-1&&s>a&&(o=o.substr(0,a)+o.substring(a+i.commentStart.length,s)+o.substr(s+i.commentEnd.length)),r.replaceRange(o,t,n)}})}),CodeMirror.defineExtension("autoIndentRange",function(e,t){var n=this;this.operation(function(){for(var r=e.line;r<=t.line;r++)n.indentLine(r,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(e,t){function n(){l+="\n",d=!0,++g}for(var r=this,i=r.getMode(),o=r.getRange(e,t).split("\n"),a=CodeMirror.copyState(i,r.getTokenAt(e).state),s=r.getOption("tabSize"),l="",g=0,d=0==e.ch,c=0;c<o.length;++c){for(var m=new CodeMirror.StringStream(o[c],s);!m.eol();){var h=CodeMirror.innerMode(i,a),f=i.token(m,a),u=m.current();m.start=m.pos,(!d||/\S/.test(u))&&(l+=u,d=!1),!d&&h.mode.newlineAfterToken&&h.mode.newlineAfterToken(f,u,m.string.slice(m.pos)||o[c+1]||"",h.state)&&n()}!m.pos&&i.blankLine&&i.blankLine(a),!d&&c<o.length-1&&n()}r.operation(function(){r.replaceRange(l,e,t);for(var n=e.line+1,i=e.line+g;i>=n;++n)r.indentLine(n,"smart");r.setSelection(e,r.getCursor(!1))})})}();