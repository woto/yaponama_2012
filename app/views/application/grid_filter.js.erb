<% f = nil %>
<% twbs_form_for @grid, url: '' do |form| %>
  <% f = form.dup %>
<% end %>

// TODO попробовать еще раз убрать рендеринг таблицы при выделении элементов

<% unless params[:items] %>
  $('#items').replaceWith('<%= j render 'grid', f: f %>');
<% end %>

<% unless params[:items] %>
  $('#grid-toolbar-per-page').replaceWith('<%= j render 'grid_toolbar_per_page', f: f %>');
<% end %>

<% unless params[:items] %>
  $('#grid-footer').replaceWith('<%= j render 'grid_footer', f: f, p: Panel.new(self)  %>');
<% end %>

$('#grid-toolbar-remove').replaceWith('<%= j render 'grid_toolbar_remove', f: f %>');

$('#grid-toolbar-selected').replaceWith('<%= j render 'grid_toolbar_selected', f: f %>');

$('#grid-toolbar-actions').replaceWith('<%= j render 'grid_toolbar_actions', f: f %>');

window.bootstrapperize();

// TODO позже разобраться, когда начну делать подгрузку фильтров через ajax
// TODO ВЕРНУТЬ!!!
//window.initSelect2();

$("html, body").animate({scrollTop: $('h1').offset().top}, 'fast')
