!function(){function e(e,n){"use strict";var r=new t(e,n);return r.beautify()}function t(e,t){"use strict";function n(e,t){return{mode:t,last_text:e?e.last_text:"",last_word:e?e.last_word:"",var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,multiline_array:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:e?e.indentation_level+(e.var_line&&e.var_line_reindented?1:0):0,ternary_depth:0}}function r(e){for(e=void 0===e?!1:e;U.length&&(" "===U[U.length-1]||U[U.length-1]===Z||U[U.length-1]===ht||e&&("\n"===U[U.length-1]||"\r"===U[U.length-1]));)U.pop()}function _(e){return e.replace(/^\s\s*|\s\s*$/,"")}function i(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function a(){return U.length&&"\n"===U[U.length-1]}function o(){return a()&&U.length-1>0&&"\n"===U[U.length-2]}function l(e,t){var n=e.length-1;for(0>n&&(n+=e.length),n>e.length-1&&(n=e.length-1),n++;n-->0;)if(n in e&&e[n]===t)return n;return-1}function s(e){if(e=void 0===e?!1:e,ut.wrap_line_length&&!e){var t="",n=0,r=l(U,"\n")+1;r<U.length&&(t=U.slice(r).join(""),n=t.length+F.length+(lt?1:0),n>=ut.wrap_line_length&&(e=!0))}(ut.preserve_newlines&&at||e)&&!a()&&(c(!1,!0),ot=!0,at=!1)}function c(e,t){if(ot=!1,lt=!1,!t&&";"!==q.last_text)for(;q.mode===Tt.Statement&&!q.if_block;)A();q.mode===Tt.ArrayLiteral&&(q.multiline_array=!0),U.length&&(e||!a())&&U.push("\n")}function d(){a()&&(ut.keep_array_indentation&&p(q.mode)&&dt.length?U.push(dt.join("")+""):(ht&&U.push(ht),f(q.indentation_level),f(q.var_line&&q.var_line_reindented),f(ot)))}function f(e){if(void 0===e?e=1:"number"!=typeof e&&(e=e?1:0),""!==q.last_text)for(var t=0;e>t;t+=1)U.push(Z)}function T(){if(lt&&U.length){var e=U[U.length-1];a()||" "===e||e===Z||U.push(" ")}}function u(e){e=e||F,d(),ot=!1,T(),lt=!1,U.push(e)}function h(){q.indentation_level+=1}function K(e){q?(J.push(q),H=q):H=n(null,e),q=n(H,e)}function p(e){return e===Tt.ArrayLiteral}function E(e){return m(e,[Tt.Expression,Tt.ForInitializer,Tt.Conditional])}function A(){J.length>0&&(H=q,q=J.pop())}function O(){return"do"===q.last_text||"else"===q.last_text&&"if"!==F||"TK_END_EXPR"===G&&(H.mode===Tt.ForInitializer||H.mode===Tt.Conditional)?(s(),K(Tt.Statement),h(),ot=!1,!0):!1}function v(e,t){for(var n=0;n<e.length;n++){var r=_(e[n]);if(r.charAt(0)!==t)return!1}return!0}function x(e){return m(e,["case","return","do","if","throw","else"])}function m(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function R(e){for(var t,n=!1,r="",_=0,i="",a=0;n||_<e.length;)if(t=e.charAt(_),_++,n){if(n=!1,"x"===t)i=e.substr(_,2),_+=2;else{if("u"!==t){r+="\\"+t;continue}i=e.substr(_,4),_+=4}if(!i.match(/^[0123456789abcdefABCDEF]+$/))return e;if(a=parseInt(i,16),a>=0&&32>a){r+="x"===t?"\\x"+i:"\\u"+i;continue}if(34===a||39===a||92===a)r+="\\"+String.fromCharCode(a);else{if("x"===t&&a>126&&255>=a)return e;r+=String.fromCharCode(a)}}else"\\"===t?n=!0:r+=t;return r}function N(e){for(var t=tt,n=z.charAt(t);m(n,V)&&n!==e;){if(t++,t>=st)return!1;n=z.charAt(t)}return n===e}function b(){var e;if(ct=0,tt>=st)return["","TK_EOF"];at=!1,dt=[];var t=z.charAt(tt);for(tt+=1;m(t,V);){if("\n"===t?(ct+=1,dt=[]):ct&&(t===Z?dt.push(Z):"\r"!==t&&dt.push(" ")),tt>=st)return["","TK_EOF"];t=z.charAt(tt),tt+=1}if(m(t,Y)){if(st>tt)for(;m(z.charAt(tt),Y)&&(t+=z.charAt(tt),tt+=1,tt!==st););if(tt!==st&&t.match(/^[0-9]+[Ee]$/)&&("-"===z.charAt(tt)||"+"===z.charAt(tt))){var n=z.charAt(tt);tt+=1;var r=b();return t+=n+r[0],[t,"TK_WORD"]}return"in"===t?[t,"TK_OPERATOR"]:[t,"TK_WORD"]}if("("===t||"["===t)return[t,"TK_START_EXPR"];if(")"===t||"]"===t)return[t,"TK_END_EXPR"];if("{"===t)return[t,"TK_START_BLOCK"];if("}"===t)return[t,"TK_END_BLOCK"];if(";"===t)return[t,"TK_SEMICOLON"];if("/"===t){var i="",a=!0;if("*"===z.charAt(tt)){if(tt+=1,st>tt)for(;st>tt&&("*"!==z.charAt(tt)||!z.charAt(tt+1)||"/"!==z.charAt(tt+1))&&(t=z.charAt(tt),i+=t,("\n"===t||"\r"===t)&&(a=!1),tt+=1,!(tt>=st)););return tt+=2,a&&0===ct?["/*"+i+"*/","TK_INLINE_COMMENT"]:["/*"+i+"*/","TK_BLOCK_COMMENT"]}if("/"===z.charAt(tt)){for(i=t;"\r"!==z.charAt(tt)&&"\n"!==z.charAt(tt)&&(i+=z.charAt(tt),tt+=1,!(tt>=st)););return[i,"TK_COMMENT"]}}if("'"===t||'"'===t||("/"===t||ut.e4x&&"<"===t&&z.slice(tt-1).match(/^<[a-zA-Z:0-9]+\s*([a-zA-Z:0-9]+="[^"]*"\s*)*\/?\s*>/))&&("TK_WORD"===G&&x(q.last_text)||"TK_END_EXPR"===G&&m(H.mode,[Tt.Conditional,Tt.ForInitializer])||m(G,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var o=t,l=!1,s=!1;if(e=t,st>tt)if("/"===o){for(var c=!1;l||c||z.charAt(tt)!==o;)if(e+=z.charAt(tt),l?l=!1:(l="\\"===z.charAt(tt),"["===z.charAt(tt)?c=!0:"]"===z.charAt(tt)&&(c=!1)),tt+=1,tt>=st)return[e,"TK_STRING"]}else if(ut.e4x&&"<"===o){var d=/<(\/?)([a-zA-Z:0-9]+)\s*([a-zA-Z:0-9]+="[^"]*"\s*)*(\/?)\s*>/g,f=z.slice(tt-1),T=d.exec(f);if(T&&0===T.index){for(var u=T[2],h=0;T;){var K=!!T[1],p=T[2],E=!!T[T.length-1];if(p!==u||E||(K?--h:++h),0>=h)break;T=d.exec(f)}var A=T?T.index+T[0].length:f.length;return tt+=A-1,[f.slice(0,A),"TK_STRING"]}}else for(;l||z.charAt(tt)!==o;)if(e+=z.charAt(tt),l?(("x"===z.charAt(tt)||"u"===z.charAt(tt))&&(s=!0),l=!1):l="\\"===z.charAt(tt),tt+=1,tt>=st)return[e,"TK_STRING"];if(tt+=1,e+=o,s&&ut.unescape_strings&&(e=R(e)),"/"===o)for(;st>tt&&m(z.charAt(tt),Y);)e+=z.charAt(tt),tt+=1;return[e,"TK_STRING"]}if("#"===t){if(0===U.length&&"!"===z.charAt(tt)){for(e=t;st>tt&&"\n"!==t;)t=z.charAt(tt),e+=t,tt+=1;return[_(e)+"\n","TK_UNKNOWN"]}var O="#";if(st>tt&&m(z.charAt(tt),rt)){do t=z.charAt(tt),O+=t,tt+=1;while(st>tt&&"#"!==t&&"="!==t);return"#"===t||("["===z.charAt(tt)&&"]"===z.charAt(tt+1)?(O+="[]",tt+=2):"{"===z.charAt(tt)&&"}"===z.charAt(tt+1)&&(O+="{}",tt+=2)),[O,"TK_WORD"]}}if("<"===t&&"<!--"===z.substring(tt-1,tt+3)){for(tt+=3,t="<!--";"\n"!==z.charAt(tt)&&st>tt;)t+=z.charAt(tt),tt++;return q.in_html_comment=!0,[t,"TK_COMMENT"]}if("-"===t&&q.in_html_comment&&"-->"===z.substring(tt-1,tt+2))return q.in_html_comment=!1,tt+=2,["-->","TK_COMMENT"];if("."===t)return[t,"TK_DOT"];if(m(t,et)){for(;st>tt&&m(t+z.charAt(tt),et)&&(t+=z.charAt(tt),tt+=1,!(tt>=st)););return","===t?[t,"TK_COMMA"]:"="===t?[t,"TK_EQUALS"]:[t,"TK_OPERATOR"]}return[t,"TK_UNKNOWN"]}function S(){if(O(),"["===F){if("TK_WORD"===G||")"===q.last_text)return m(q.last_text,nt)&&(lt=!0),K(Tt.Expression),u(),void(ut.space_in_paren&&(lt=!0));p(q.mode)&&("["===q.last_text||","===q.last_text&&("]"===$||"}"===$))&&(ut.keep_array_indentation||c())}else K("for"===q.last_text?Tt.ForInitializer:m(q.last_text,["if","while"])?Tt.Conditional:Tt.Expression);";"===q.last_text||"TK_START_BLOCK"===G?c():"TK_END_EXPR"===G||"TK_START_EXPR"===G||"TK_END_BLOCK"===G||"."===q.last_text?at&&c():"TK_WORD"!==G&&"TK_OPERATOR"!==G?lt=!0:"function"===q.last_word||"typeof"===q.last_word?ut.jslint_happy&&(lt=!0):(m(q.last_text,nt)||"catch"===q.last_text)&&ut.space_before_conditional&&(lt=!0),"("===F&&("TK_EQUALS"===G||"TK_OPERATOR"===G)&&q.mode!==Tt.ObjectLiteral&&s(),u(),ut.space_in_paren&&(lt=!0),"["===F&&(K(Tt.ArrayLiteral),h()),it&&(it=!1,h())}function y(){for(;q.mode===Tt.Statement;)A();"]"===F&&p(q.mode)&&q.multiline_array&&!ut.keep_array_indentation&&c(),A(),ut.space_in_paren&&(lt=!0),u(),q.do_while&&H.mode===Tt.Conditional&&(H.mode=Tt.Expression,q.do_block=!1,q.do_while=!1)}function L(){K(Tt.BlockStatement);var e=N("}"),t=e&&"function"===q.last_word&&"TK_END_EXPR"===G;"expand"===ut.brace_style?"TK_OPERATOR"!==G&&(t||"TK_EQUALS"===G||x(q.last_text)&&"else"!==q.last_text)?lt=!0:c():"TK_OPERATOR"!==G&&"TK_START_EXPR"!==G?"TK_START_BLOCK"===G?c():lt=!0:p(H.mode)&&","===q.last_text&&("}"===$?lt=!0:c()),u(),h()}function C(){for(;q.mode===Tt.Statement;)A();A();var e="TK_START_BLOCK"===G;"expand"===ut.brace_style?e||c():e||(p(q.mode)&&ut.keep_array_indentation?(ut.keep_array_indentation=!1,c(),ut.keep_array_indentation=!0):c()),u()}function g(){if(O()||!at||E(q.mode)||"TK_OPERATOR"===G&&"--"!==q.last_text&&"++"!==q.last_text||"TK_EQUALS"===G||!ut.preserve_newlines&&"var"===q.last_text||c(),q.do_block&&!q.do_while){if("while"===F)return lt=!0,u(),lt=!0,void(q.do_while=!0);c(),q.do_block=!1}if(it&&x(F)&&(it=!1),q.if_block&&"else"!==F){for(;q.mode===Tt.Statement;)A();q.if_block=!1}return"function"===F?(q.var_line&&"TK_EQUALS"!==G&&(q.var_line_reindented=!0),!a()&&";"!==q.last_text&&"}"!==q.last_text||"{"===q.last_text||p(q.mode)||(a()||c(!0),o()||c(!0)),"TK_WORD"===G?"get"===q.last_text||"set"===q.last_text||"new"===q.last_text||"return"===q.last_text?lt=!0:c():"TK_OPERATOR"===G||"="===q.last_text?lt=!0:E(q.mode)||c(),u(),void(q.last_word=F)):"case"===F||"default"===F&&q.in_case_statement?(c(),(q.case_body||ut.jslint_happy)&&(q.indentation_level--,q.case_body=!1),u(),q.in_case=!0,void(q.in_case_statement=!0)):(_t="NONE","TK_END_BLOCK"===G?m(F,["else","catch","finally"])?"expand"===ut.brace_style||"end-expand"===ut.brace_style?_t="NEWLINE":(_t="SPACE",lt=!0):_t="NEWLINE":"TK_SEMICOLON"===G&&q.mode===Tt.BlockStatement?_t="NEWLINE":"TK_SEMICOLON"===G&&E(q.mode)?_t="SPACE":"TK_STRING"===G?_t="NEWLINE":"TK_WORD"===G?_t="SPACE":"TK_START_BLOCK"===G?_t="NEWLINE":"TK_END_EXPR"===G&&(lt=!0,_t="NEWLINE"),m(F,nt)&&")"!==q.last_text&&(_t="else"===q.last_text?"SPACE":"NEWLINE"),("TK_COMMA"===G||"TK_START_EXPR"===G||"TK_EQUALS"===G||"TK_OPERATOR"===G)&&q.mode!==Tt.ObjectLiteral&&s(),m(F,["else","catch","finally"])?"TK_END_BLOCK"!==G||"expand"===ut.brace_style||"end-expand"===ut.brace_style?c():(r(!0),"}"!==U[U.length-1]&&c(),lt=!0):"NEWLINE"===_t?x(q.last_text)?lt=!0:"TK_END_EXPR"!==G?"TK_START_EXPR"===G&&"var"===F||":"===q.last_text||("if"===F&&"else"===q.last_word&&"{"!==q.last_text?lt=!0:(q.var_line=!1,q.var_line_reindented=!1,c())):m(F,nt)&&")"!==q.last_text&&(q.var_line=!1,q.var_line_reindented=!1,c()):p(q.mode)&&","===q.last_text&&"}"===$?c():"SPACE"===_t&&(lt=!0),u(),q.last_word=F,"var"===F&&(q.var_line=!0,q.var_line_reindented=!1,q.var_line_tainted=!1),"do"===F&&(q.do_block=!0),void("if"===F&&(q.if_block=!0)))}function w(){for(;q.mode===Tt.Statement&&!q.if_block;)A();u(),q.var_line=!1,q.var_line_reindented=!1,q.mode===Tt.ObjectLiteral&&(q.mode=Tt.BlockStatement)}function M(){O()?lt=!0:"TK_WORD"===G?lt=!0:"TK_COMMA"===G||"TK_START_EXPR"===G||"TK_EQUALS"===G||"TK_OPERATOR"===G?q.mode!==Tt.ObjectLiteral&&s():c(),u()}function k(){q.var_line&&(q.var_line_tainted=!0),lt=!0,u(),lt=!0}function I(){return q.var_line?((E(q.mode)||"TK_END_BLOCK"===G)&&(q.var_line_tainted=!1),q.var_line&&(q.var_line_reindented=!0),u(),void(q.var_line_tainted?(q.var_line_tainted=!1,c()):lt=!0)):void("TK_END_BLOCK"===G&&q.mode!==Tt.Expression?(u(),q.mode===Tt.ObjectLiteral&&"}"===q.last_text?c():lt=!0):q.mode===Tt.ObjectLiteral?(u(),c()):(u(),lt=!0))}function P(){var e=!0,t=!0;return x(q.last_text)?(lt=!0,void u()):"*"!==F||"TK_DOT"!==G||$.match(/^\d+$/)?":"===F&&q.in_case?(q.case_body=!0,h(),u(),c(),void(q.in_case=!1)):"::"===F?void u():(!at||"--"!==F&&"++"!==F||c(),m(F,["--","++","!"])||m(F,["-","+"])&&(m(G,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||m(q.last_text,nt)||","===q.last_text)?(e=!1,t=!1,";"===q.last_text&&E(q.mode)&&(e=!0),"TK_WORD"===G&&m(q.last_text,nt)&&(e=!0),q.mode!==Tt.BlockStatement&&q.mode!==Tt.Statement||"{"!==q.last_text&&";"!==q.last_text||c()):":"===F?0===q.ternary_depth?(q.mode===Tt.BlockStatement&&(q.mode=Tt.ObjectLiteral),e=!1):q.ternary_depth-=1:"?"===F&&(q.ternary_depth+=1),lt=lt||e,u(),void(lt=t)):void u()}function D(){var e,t=i(F);if(v(t.slice(1),"*"))for(c(!1,!0),u(t[0]),e=1;e<t.length;e++)c(!1,!0),u(" "+_(t[e]));else for(t.length>1?c(!1,!0):"TK_END_BLOCK"===G?c(!1,!0):lt=!0,u(t[0]),U.push("\n"),e=1;e<t.length;e++)U.push(t[e]),U.push("\n");N("\n")||c(!1,!0)}function B(){lt=!0,u(),lt=!0}function j(){at?c(!1,!0):r(!0),lt=!0,u(),c(!1,!0)}function W(){x(q.last_text)?lt=!0:s(")"===q.last_text&&ut.break_chained_methods),a()&&(it=!0),u()}function X(){u(),"\n"===F[F.length-1]&&c()}var z,U,F,Q,G,$,Z,q,H,J,V,Y,et,tt,nt,rt,_t,it,at,ot,lt,st,ct,dt,ft,Tt,ut,ht="";for(V="\n\r	 ".split(""),Y="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),rt="0123456789".split(""),et="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",et+=" <%= <% %> <?= <? ?>",et=et.split(" "),nt="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),Tt={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},ft={TK_START_EXPR:S,TK_END_EXPR:y,TK_START_BLOCK:L,TK_END_BLOCK:C,TK_WORD:g,TK_SEMICOLON:w,TK_STRING:M,TK_EQUALS:k,TK_OPERATOR:P,TK_COMMA:I,TK_BLOCK_COMMENT:D,TK_INLINE_COMMENT:B,TK_COMMENT:j,TK_DOT:W,TK_UNKNOWN:X},t=t?t:{},ut={},void 0!==t.space_after_anon_function&&void 0===t.jslint_happy&&(t.jslint_happy=t.space_after_anon_function),void 0!==t.braces_on_own_line&&(ut.brace_style=t.braces_on_own_line?"expand":"collapse"),ut.brace_style=t.brace_style?t.brace_style:ut.brace_style?ut.brace_style:"collapse","expand-strict"===ut.brace_style&&(ut.brace_style="expand"),ut.indent_size=t.indent_size?parseInt(t.indent_size,10):4,ut.indent_char=t.indent_char?t.indent_char:" ",ut.preserve_newlines=void 0===t.preserve_newlines?!0:t.preserve_newlines,ut.break_chained_methods=void 0===t.break_chained_methods?!1:t.break_chained_methods,ut.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),ut.space_in_paren=void 0===t.space_in_paren?!1:t.space_in_paren,ut.jslint_happy=void 0===t.jslint_happy?!1:t.jslint_happy,ut.keep_array_indentation=void 0===t.keep_array_indentation?!1:t.keep_array_indentation,ut.space_before_conditional=void 0===t.space_before_conditional?!0:t.space_before_conditional,ut.unescape_strings=void 0===t.unescape_strings?!1:t.unescape_strings,ut.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),ut.e4x=void 0===t.e4x?!1:t.e4x,Z="";ut.indent_size>0;)Z+=ut.indent_char,ut.indent_size-=1;for(;e&&(" "===e.charAt(0)||"	"===e.charAt(0));)ht+=e.charAt(0),e=e.substring(1);z=e,st=e.length,G="TK_START_BLOCK",$="",U=[],ot=!1,lt=!1,dt=[],J=[],K(Tt.BlockStatement),tt=0,this.beautify=function(){for(var e,t,n,r;;){if(e=b(),F=e[0],Q=e[1],"TK_EOF"===Q)break;if(n=ut.keep_array_indentation&&p(q.mode))for(t=0;ct>t;t+=1)c(!0);else if(at=ct>0,ut.max_preserve_newlines&&ct>ut.max_preserve_newlines&&(ct=ut.max_preserve_newlines),ut.preserve_newlines&&ct>1)for(c(),t=1;ct>t;t+=1)c(!0);ft[Q](),"TK_INLINE_COMMENT"!==Q&&"TK_COMMENT"!==Q&&"TK_UNKNOWN"!==Q&&($=q.last_text,G=Q,q.last_text=F)}return r=ht+U.join("").replace(/[\r\n ]+$/,"")}}"function"==typeof define?define(function(t,n){n.js_beautify=e}):"undefined"!=typeof exports?exports.js_beautify=e:"undefined"!=typeof window?window.js_beautify=e:"undefined"!=typeof global&&(global.js_beautify=e)}();